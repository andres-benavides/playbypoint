<!DOCTYPE html>
<html>
  <head>
    <title>History URLs</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
  </head>
  <body class="container mt-5">

    <h1 class="mb-4">History Shortened URs</h1>

    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>URL</th>
          <th>Shortened URL</th>
          <th>Total Visits</th>
          <th>IP Adress</th>
        </tr>
      </thead>
      <tbody>
        <% @urls.each do |url| %>
          <tr>
            <td><%= url.url %></td>
            <td>
              <a href="<%= "#{request.base_url}/s/#{url.short_code}" %>" target="_blank" rel="noopener">
                <%= "#{request.base_url}/s/#{url.short_code}" %>
              </a>
            </td>
            <td><%= url.url_visits.count %></td>
            <td>
              <ul class="mb-0">
                <% url.url_visits.each do |visit| %>
                  <li><%= visit.ip_address %></li>
                <% end %>
              </ul>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <%= link_to "← Back", shortener_path, class: "btn btn-secondary" %>

  </body>
</html>
